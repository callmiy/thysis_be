(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{347:function(e,t,r){"use strict";var a=r(16),n=r(631),o=r(60),i=r(64),s=r(62),c=r(61),l=r(63),u=r(0),m=r(142),d=r(657),f=(r(355),{showingSidebar:!1}),b=r(39),O=r(11),p=function(e){function t(){var e,r;Object(o.a)(this,t);for(var a=arguments.length,n=new Array(a),i=0;i<a;i++)n[i]=arguments[i];return(r=Object(s.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(n)))).state=f,r.renderWithContext=function(e){var t=r.props,a=t.className,n=void 0===a?"":a,o=t.style,i=t.currentProject,s=t.title,c=t.match.path,l=t.showSideBarTrigger,f=e.onShowClicked,b=e.minWidth600,p=e.showSidebar,v=!b||!p;return u.createElement("div",{className:"".concat(n," src-components-header"),style:o},u.createElement("div",{className:"top"},l&&v&&u.createElement("a",{className:"sidebar-trigger item",onClick:f},u.createElement(m.a,{name:"content"})),u.createElement("div",{className:"title"},s)),i&&u.createElement("div",{className:"bottom"},c===O.e?u.createElement("span",{className:"project-title"},i.title):u.createElement(d.a,{to:Object(O.k)(),className:"project-title"},i.title)))},r}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.createElement(b.a,null,this.renderWithContext)}}]),t}(u.Component),v=r(120),E=Object(a.graphql)(v.a,{props:function(e){return e.data}});t.a=Object(a.compose)(n.a,E)(p)},355:function(e,t,r){},616:function(e,t,r){},646:function(e,t,r){"use strict";r.r(t);var a=r(16),n=r(4),o=r(5),i=r.n(o),s=r(41);function c(){var e=Object(n.a)(["\n  mutation UserRegMutation($registration: Registration!) {\n    registration(registration: $registration) {\n      ...UserFragment\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var l,u,m=i()(c(),s.a),d=r(133),f=r(8),b=r.n(f),O=r(51),p=r(25),v=r(126),E=r(14),h=r(60),S=r(64),j=r(62),g=r(61),w=r(63),C=r(0),A=r.n(C),N=r(640),R=r(648),y=r(632),F=r(644),P=r(142),k=r(635),M=r(657),D=r(343),W=r(183),U=r.n(W),x=r(119),I=r.n(x);r(616);!function(e){e.EMAIL="email",e.NAME="name",e.PASSWORD="password",e.PASSWORD_CONFIRM="passwordConfirmation",e.SOURCE="source"}(u||(u={}));var V=Object.values(u).reduce(function(e,t){return Object(p.a)({},e,Object(O.a)({},t,void 0))},{}),$={initialFormValues:(l={},Object(O.a)(l,u.NAME,""),Object(O.a)(l,u.EMAIL,""),Object(O.a)(l,u.PASSWORD,""),Object(O.a)(l,u.PASSWORD_CONFIRM,""),Object(O.a)(l,u.SOURCE,"password"),l),formValues:V},L=r(11),T=r(347),Q=r(115),_=function(e){function t(){var e,r;Object(h.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(j.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(n)))).state=$,r.renderErrorOrSuccess=function(){var e=r.state.graphQlError;if(e)return A.a.createElement(N.a.Content,{extra:!0},A.a.createElement(F.a,{error:!0,onDismiss:r.handleFormErrorDismissed},A.a.createElement(F.a.Content,null,e.message)))},r.submit=function(){var e=Object(E.a)(b.a.mark(function e(t,a){var n,o,i;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setSubmitting(!0),n={},n=Object.entries(r.state.formValues).reduce(function(e,t){var r=Object(v.a)(t,2),a=r[0],n=r[1];return Object(p.a)({},e,Object(O.a)({},a,n))},n),e.prev=3,e.next=6,r.props.regUser({variables:{registration:n}});case 6:if(!(o=e.sent)||!o.data){e.next=13;break}return(i=o.data.registration)&&Q.a.connect(i.jwt),e.next=12,r.props.updateLocalUser({variables:{user:i}});case 12:r.props.history.replace(L.c);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a.setSubmitting(!1),r.setState({graphQlError:e.t0});case 19:case"end":return e.stop()}},e,this,[[3,15]])}));return function(t,r){return e.apply(this,arguments)}}(),r.renderForm=function(e){var t=e.dirty,a=e.isSubmitting,n=e.errors,o=e.handleSubmit,i=r.state.graphQlError,s=!t||a||!U()(n)||!!i;return A.a.createElement(N.a,null,A.a.createElement(N.a.Content,{className:"form-title",extra:!0},"Sign up for Thysis"),r.renderErrorOrSuccess(),A.a.createElement(N.a.Content,null,A.a.createElement(k.a,{onSubmit:o},[["Name","text",u.NAME],["Email","email",u.EMAIL],["Password","password",u.PASSWORD],["Password Confirm","password",u.PASSWORD_CONFIRM],["Source","text",u.SOURCE]].map(function(e){var t=Object(v.a)(e,3),a=t[0],n=t[1],o=t[2];return A.a.createElement(D.a,{key:o,name:o,render:r.renderInput(a,n)})}),A.a.createElement(R.a,{id:"author-modal-submit",color:"green",inverted:!0,disabled:s,loading:a,type:"submit",fluid:!0},A.a.createElement(P.a,{name:"checkmark"})," Ok"))),A.a.createElement(N.a.Content,{extra:!0},A.a.createElement(M.a,{className:"to-login-button",to:L.b},"Already have an account? Login")))},r.renderInput=function(e,t){return function(a){var n=a.field,o=a.form,i=n.name,s=o.errors[i],c=r.isFormEmpty(),l=!!s&&!c,m=o.touched[i],d=i===u.SOURCE;return A.a.createElement("div",null,A.a.createElement(k.a.Field,Object.assign({},n,{className:"form-field ".concat(d?"disabled":""),type:t,control:y.a,placeholder:e,autoComplete:"off",label:e,id:i,error:l,onBlur:r.handleFormControlBlur(i,o),onFocus:r.handleFocus,autoFocus:i===u.NAME,readOnly:d})),l&&m&&!c&&A.a.createElement(F.a,{error:!0,header:s}))}},r.handleFormControlBlur=function(e,t){return function(){t.setFieldTouched(e,!0)}},r.handleFocus=function(){r.setState({graphQlError:void 0})},r.handleFormErrorDismissed=function(){return r.setState({graphQlError:void 0})},r.validate=function(e){for(var t={},a=Object.entries(e),n=0;n<a.length;n++){var o=a[n],i=Object(v.a)(o,2),s=i[0],c=i[1],l=void 0;switch(s){case u.NAME:l=r.validateName(c);break;case u.EMAIL:l=r.validateEmail(c);break;case u.PASSWORD:l=r.validatePassword(c);break;case u.PASSWORD_CONFIRM:l=r.validatePasswordConfirm(c,e[u.PASSWORD]||"");break;case u.SOURCE:l=r.validateSource(c)}if(l)return t[s]=l,t}return t},r.validateName=function(e){return e=(e||"").trim(),r.setState(function(t){return I()(t,{formValues:Object(O.a)({},u.NAME,{$set:e||void 0})})}),e?e.length<2?"Too short":"":"Enter name"},r.validateEmail=function(e){e=(e||"").trim();var t="";return e&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||(t="Enter valid email"),r.setState(function(t){return I()(t,{formValues:Object(O.a)({},u.EMAIL,{$set:e})})}),t},r.validatePassword=function(e){e=(e||"").trim();var t="";return e?e.length<4&&(t="Too short"):t="Enter Password",r.setState(function(t){return I()(t,{formValues:Object(O.a)({},u.PASSWORD,{$set:e})})}),t},r.validatePasswordConfirm=function(e,t){e=(e||"").trim();var a="";return e?e!==t&&(a="Passwords don't match"):a="Confirm Password",r.setState(function(t){return I()(t,{formValues:Object(O.a)({},u.PASSWORD_CONFIRM,{$set:e})})}),a},r.validateSource=function(e){return e=(e||"").trim(),r.setState(function(t){return I()(t,{formValues:Object(O.a)({},u.SOURCE,{$set:e||"password"})})}),""},r.isFormEmpty=function(){for(var e=Object.entries(r.state.formValues),t=0;t<e.length;t++){var a=e[t],n=Object(v.a)(a,2),o=n[0],i=n[1];if(o!==u.SOURCE&&void 0!==i)return!1}return!0},r}return Object(w.a)(t,e),Object(S.a)(t,[{key:"componentDidMount",value:function(){Object(L.o)("Sign Up")}},{key:"componentWillUnmount",value:function(){Object(L.o)()}},{key:"render",value:function(){return A.a.createElement("div",{className:"user-reg-route"},A.a.createElement(T.a,{title:"Thysis"}),A.a.createElement("div",{className:"main"},A.a.createElement(D.b,{initialValues:this.state.initialFormValues,enableReinitialize:!0,onSubmit:this.submit,render:this.renderForm,validate:this.validate})))}}]),t}(A.a.Component),B=Object(a.graphql)(m,{props:function(e){return{regUser:e.mutate}}});t.default=Object(a.compose)(d.a,B)(_)}}]);
//# sourceMappingURL=./12.278898f4.chunk.js-984737b0bf27f6ec6f7cbb350a46dbe7.map