(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{597:function(e,t,r){},623:function(e,t,r){"use strict";r.r(t);var a=r(23),n=r(117),c=r.n(n),o=r(167),u=r(7),l=r(8),s=r.n(l),i=r(43);function m(){var e=Object(u.a)(["\n  mutation CreateProjectMutation($project: CreateProjectInput!) {\n    project(project: $project) {\n      ...ProjectFragment\n    }\n  }\n\n  ","\n"]);return m=function(){return e},e}var p=s()(m(),i.a),j=r(10),d=r.n(j),f=r(15),v=r(64),b=r(68),P=r(66),h=r(65),E=r(67),w=r(0),y=r.n(w),O=r(613),g=r(400),k=r(616),C=r(619),N=r(600),x=r(598),F=(r(597),r(348)),S=r(58),$={form:{title:""}},I=r(12),M=r(354),L=function(e){function t(){var e,r;Object(v.a)(this,t);for(var a=arguments.length,n=new Array(a),o=0;o<a;o++)n[o]=arguments[o];return(r=Object(P.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(n)))).state=$,r.renderForm=function(){var e=r.props,t=e.loading,a=e.error;if(!t&&!a){var n=r.state.form,c=r.formError();return y.a.createElement(k.a,{className:"form"},y.a.createElement("div",{className:"control"},y.a.createElement(k.a.Field,{control:O.a,className:"input",name:"title",autoComplete:"off",placeholder:"Project title",autoFocus:!0,onChange:r.onProjectInputChange,value:r.state.form.title,error:c}),n.title&&!c?y.a.createElement(g.a,{name:"checkmark",color:"green",onClick:r.submit}):void 0,n.title?y.a.createElement(g.a,{name:"times",color:"red",onClick:r.resetForm}):void 0),c&&y.a.createElement("div",{className:"message"},"Too short"))}},r.renderProjects=function(){var e=r.props,t=e.projects,a=e.loading,n=e.error;return a?y.a.createElement(S.a,null):n?y.a.createElement("div",null,"Unable to load projects",y.a.createElement("div",null,n.message)):t&&t.length?y.a.createElement("div",null,y.a.createElement("div",{className:"your-projects"},y.a.createElement("span",{className:"label"},"Projects")),y.a.createElement(C.a,{divided:!0,relaxed:!0},t.map(r.renderProject))):y.a.createElement("div",{className:"no-project"},"You currently have no project. You may create one now.")},r.renderProject=function(e){if(e)return y.a.createElement(C.a.Item,{key:e.id},y.a.createElement(C.a.Content,{className:"project-row",onClick:r.projectSelected(e)},y.a.createElement(C.a.Header,{className:"project-row__header"},e.title),y.a.createElement(C.a.Description,{className:"project-row__desc"},"Created: \xa0 \xa0",Object(N.a)(Object(x.a)(e.insertedAt),"eeee, M/MMM/yyyy HH:mm a"))))},r.projectSelected=function(e){return Object(f.a)(d.a.mark(function t(){var a,n,c;return d.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.props,n=a.history,c=a.updateLocalProject,t.next=3,c({variables:{currentProject:e}});case 3:n.push(Object(I.k)());case 4:case"end":return t.stop()}},t)}))},r.submit=Object(f.a)(d.a.mark(function e(){var t,a,n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.createProject(r.state.form.title);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(a=t.data){e.next=8;break}return e.abrupt("return");case 8:if(n=a.project){e.next=11;break}return e.abrupt("return");case 11:r.projectSelected(n)();case 12:case"end":return e.stop()}},e)})),r.onProjectInputChange=function(e,t){var a=t.value;r.setState(function(e){return c()(e,{form:{title:{$set:a}}})})},r.resetForm=function(){return r.setState(function(e){return c()(e,{form:{title:{$set:""}}})})},r.formError=function(){var e=r.state.form.title;return e.length>0&&e.length<2},r}return Object(E.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return y.a.createElement(M.a,null,y.a.createElement("div",{className:"select-project"},y.a.createElement(F.a,{title:"Select Project",showSideBarTrigger:!0}),y.a.createElement("div",{className:"main"},this.renderForm(),this.renderProjects())))}}]),t}(y.a.Component);function _(){var e=Object(u.a)(["\n  mutation ProjectLocalMutation($currentProject: LocalProjectInput!) {\n    currentProject(currentProject: $currentProject) @client\n  }\n"]);return _=function(){return e},e}var H=s()(_()),q=Object(a.e)(H,{props:function(e){return{updateLocalProject:e.mutate}}}),A=Object(a.e)(o.a,{props:function(e){return e.data}}),J=Object(a.e)(p,{props:function(e){var t=e.mutate;return{createProject:function(r){return t({variables:{project:{title:r,userId:e.ownProps.user.id}},update:function(t,r){var a=r.data;if(a){var n=a.project;if(n){e.ownProps.updateLocalProject({variables:{currentProject:n}});var u=t.readQuery({query:o.a}),l=c()(u,{projects:{$push:[n]}});t.writeQuery({query:o.a,data:l})}}}})}}}});t.default=Object(a.d)(A,q,J)(L)}}]);
//# sourceMappingURL=15.a9b28d40.chunk.js.map