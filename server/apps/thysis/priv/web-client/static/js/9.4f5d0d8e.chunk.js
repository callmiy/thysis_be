(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{348:function(e,t,n){"use strict";var a=n(23),r=n(612),o=n(64),i=n(68),l=n(66),s=n(65),c=n(67),u=n(0),m=n(400),d=n(633),p=(n(358),{showingSidebar:!1}),f=n(40),b=n(12),h=function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(l.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).state=p,n.renderWithContext=function(e){var t=n.props,a=t.className,r=void 0===a?"":a,o=t.style,i=t.currentProject,l=t.title,s=t.match.path,c=t.showSideBarTrigger,p=e.onShowClicked,f=e.minWidth600,h=e.showSidebar,v=!f||!h;return u.createElement("div",{className:"".concat(r," src-components-header"),style:o},u.createElement("div",{className:"top"},c&&v&&u.createElement("a",{className:"sidebar-trigger item",onClick:p},u.createElement(m.a,{name:"content"})),u.createElement("div",{className:"title"},l)),i&&u.createElement("div",{className:"bottom"},s===b.e?u.createElement("span",{className:"project-title"},i.title):u.createElement(d.a,{to:Object(b.k)(),className:"project-title"},i.title)))},n}return Object(c.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return u.createElement(f.a,null,this.renderWithContext)}}]),t}(u.Component),v=n(118),g=Object(a.e)(v.a,{props:function(e){return e.data}});t.a=Object(a.d)(r.a,g)(h)},358:function(e,t,n){},596:function(e,t,n){},622:function(e,t,n){"use strict";n.r(t);var a,r,o=n(23),i=n(124),l=n(10),s=n.n(l),c=n(15),u=n(64),m=n(68),d=n(66),p=n(65),f=n(67),b=n(0),h=n.n(b),v=n(620),g=n(629),E=n(613),O=n(624),j=n(400),y=n(616),S=n(343),w=n(184),k=n.n(w),F=n(633),x=n(117),C=n.n(x),A=(n(596),n(52));!function(e){e.EMAIL="email",e.PASSWORD="password"}(r||(r={}));var N=(a={},Object(A.a)(a,r.EMAIL,""),Object(A.a)(a,r.PASSWORD,""),a),U={formValues:N,initialFormValues:N},V=n(12),L=n(348),D=n(166),P=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(o)))).state=U,n.validate=function(e){for(var t={},a=Object.keys(e),r=0;r<a.length;r++){var o=a[r],i=n.formValuesEmpty(e)?"":n["validate".concat(o.charAt(0).toUpperCase()).concat(o.slice(1))](e[o]);if(i)return t[o]=i,t}return t},n.validateEmail=function(e){return e&&/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(n.setState(function(t){return C()(t,{formValues:{email:{$set:e}}})}),""):"Enter valid email"},n.validatePassword=function(e){return e?e.length<4?"Too short":(n.setState(function(t){return C()(t,{formValues:{password:{$set:e}}})}),""):"Enter Password"},n.renderError=function(){var e=n.state.graphQlError;if(e)return h.a.createElement(v.a.Content,{extra:!0},h.a.createElement(O.a,{error:!0,onDismiss:n.handleErrorMsgDismiss},h.a.createElement(O.a.Content,null,e.message)))},n.submit=function(){var e=Object(c.a)(s.a.mark(function e(t,a){var r,o,i,l,c,u,m,d;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.setSubmitting(!0),r=n.props,o=r.login,i=r.client,l=r.updateLocalUser,e.prev=2,e.next=5,o({variables:{login:n.state.formValues}});case 5:if(!(c=e.sent)||!c.data){e.next=14;break}if(!(u=c.data.login)){e.next=14;break}return m=u.projects,d=u.jwt,Object(D.a)(m,i,d),e.next=13,l({variables:{user:u}});case 13:n.props.history.replace(V.c);case 14:e.next=20;break;case 16:e.prev=16,e.t0=e.catch(2),a.setSubmitting(!1),n.setState({graphQlError:e.t0});case 20:case"end":return e.stop()}},e,null,[[2,16]])}));return function(t,n){return e.apply(this,arguments)}}(),n.renderForm=function(e){var t=e.dirty,a=e.isSubmitting,o=e.errors,l=e.handleSubmit,s=n.state.graphQlError,c=!t||a||!k()(o)||!!s;return h.a.createElement(v.a,null,h.a.createElement(v.a.Content,{className:"form-title",extra:!0},"Login to Thysis"),n.renderError(),h.a.createElement(v.a.Content,null,h.a.createElement(y.a,{onSubmit:l},[["Email","email",r.EMAIL],["Password","password",r.PASSWORD]].map(function(e){var t=Object(i.a)(e,3),a=t[0],r=t[1],o=t[2];return h.a.createElement(S.a,{key:o,name:o,render:n.renderInput(a,r)})}),h.a.createElement(g.a,{id:"author-modal-submit",color:"green",inverted:!0,disabled:c,loading:a,type:"submit",fluid:!0},h.a.createElement(j.a,{name:"checkmark"})," Ok"))),h.a.createElement(v.a.Content,{extra:!0},h.a.createElement(F.a,{className:"to-reg-button",to:V.i},"Don't have an account? Sign Up")))},n.renderInput=function(e,t){return function(a){var o=a.field,i=a.form,l=n.state.initialFormValues.email,s=o.name,c=i.errors[s],u=!!c,m=i.touched[s],d=!1;return s!==r.EMAIL||l?s===r.PASSWORD&&l&&(d=!0):d=!0,h.a.createElement("div",null,h.a.createElement(y.a.Field,Object.assign({},o,{type:t,control:E.a,placeholder:e,autoComplete:"off",label:e,id:s,error:u,onBlur:n.handleFormControlBlur(s,i),onFocus:n.handleFocus,autoFocus:d})),u&&m&&h.a.createElement(O.a,{style:{display:"block",padding:"0.5em",marginBottom:"1em",marginTop:"-10px"},error:!0,header:c}))}},n.handleFormControlBlur=function(e,t){return function(){t.setFieldTouched(e,!0)}},n.handleFocus=function(){n.setState({graphQlError:void 0})},n.handleErrorMsgDismiss=function(){return n.setState({graphQlError:void 0})},n.formValuesEmpty=function(e){for(var t=!0,n=Object.values(e),a=0;a<n.length;a++){n[a].trim()&&(t=!1)}return t},n}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark(function e(){var t,n,a,r,o;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Object(V.o)("Sign In"),t=this.props,n=t.updateLocalUser,t.loggedOutUser){e.next=7;break}return e.next=5,n({variables:{user:null}});case 5:(a=e.sent)&&(r=a.data)&&(o=r.user)&&this.setState(function(e){return C()(e,{initialFormValues:{email:{$set:o.email}}})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){Object(V.o)()}},{key:"render",value:function(){return h.a.createElement("div",{className:"login-route"},h.a.createElement(L.a,{title:"Thysis"}),h.a.createElement("div",{className:"main"},h.a.createElement(S.b,{initialValues:this.state.initialFormValues,enableReinitialize:!0,onSubmit:this.submit,render:this.renderForm,validate:this.validate})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.loggedOutUser;return n?C()(t,{initialFormValues:{email:{$set:n.email}}}):null}}]),t}(h.a.Component),M=n(7),W=n(8),I=n.n(W),$=n(42),Q=n(43);function T(){var e=Object(M.a)(["\n  mutation LoginMutation($login: LoginUser!) {\n    login(login: $login) {\n      ...UserFragment\n      projects {\n        ...ProjectFragment\n      }\n    }\n  }\n  ","\n  ","\n"]);return T=function(){return e},e}var B=I()(T(),$.a,Q.a),R=n(131);function z(){var e=Object(M.a)(["\n  query LoggedOutUserLocalQuery {\n    loggedOutUser @client {\n      ...UserFragment\n    }\n  }\n\n  ","\n"]);return z=function(){return e},e}var J=I()(z(),$.b),Z=Object(o.e)(B,{props:function(e){return{login:e.mutate}}}),q=Object(o.e)(J,{props:function(e){return e.data}});t.default=Object(o.d)(q,R.a,Z,o.f)(P)}}]);
//# sourceMappingURL=9.4f5d0d8e.chunk.js.map